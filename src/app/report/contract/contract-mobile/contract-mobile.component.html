<ion-app>
  <ion-header #hideheader>
    <ion-toolbar>
      <div class="d-flex justify-content-between">
        <div class="f-11">
          فروشنده: {{ model?.contractHeader?.companyName }}
        </div>
        <div class="f-11">
          خریدار :{{ model?.contractHeader?.customerName }}
        </div>
      </div>
    </ion-toolbar>
  </ion-header>
  <ion-content
    [appParallax]="img"
    scrollEvents="true"
    [appHideHeader]="hideheader"
    (ionScroll)="onScroll($event)"
  >
    <div class="relative">
      <img id="img" #img src="/assets/images/logos/logo.png" />
      <div class="content">
        <ion-row>
          <ion-col size="12">
            <ion-card class="ion-padding ion-text-right ion-no-margin">
              <ion-card-content class="ion-no-padding">
                <ion-row>
                  <ion-col size="5" class="ion-text-right">
                    <ion-label class="f-16">
                      <strong> شماره قرار داد </strong>
                    </ion-label>
                  </ion-col>
                  <ion-col size="6" class="ion-text-right">
                    <ion-label class="f-16">
                      <strong>
                        {{ model?.contractHeader?.shContract }}</strong
                      ></ion-label
                    >
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col size="5" class="ion-text-right">
                    <ion-label class="f-16">تاریخ </ion-label>
                  </ion-col>
                  <ion-col size="6" class="ion-text-right f-16">
                    {{ model?.contractHeader?.contractDate }}
                  </ion-col>
                </ion-row>
              </ion-card-content>
            </ion-card>
          </ion-col>
        </ion-row>
      </div>
      <div class="status position-absolute">
        <span
          class="badge bg-success success"
          *ngIf="model?.contractHeader.isAccepted"
          >تایید شده</span
        >
        <span
          *ngIf="model?.contractHeader.isRejected"
          class="badge bg-danger danger"
          >تاییده نشده</span
        >
        <span
          *ngIf="
            !model?.contractHeader.isRejected &&
            !model?.contractHeader.isAccepted
          "
          class="badge badge-warning"
          >در حال بررسی</span
        >
      </div>
    </div>

    <div class="header-bg ion-padding-start p-3">
      <h6 class="f-15">قرار داد بتن آماده</h6>
    </div>

    <div>
      <!---------------فروشنده-->
      <ion-card class="mb-4 mt-3 ion-text-right">
        <ion-card-header class="ion-no-padding">
          <ion-card-title class="inv-title-1 text-center">
            مشخصات فروشنده
          </ion-card-title>
        </ion-card-header>
        <ion-card-content class="ion-margin-top">
          <p class="invo-addr-1 color-white f-12 mb-2">
            نام شخص حقیقی/حقوقی :
            <span class="f-bold">
              {{ model?.contractHeader?.companyName }}</span
            >
          </p>
          <p class="invo-addr-1 color-white f-12 mb-2">
            شماره همراه :
            <span class="f-bold">
              {{ model?.contractHeader?.customerMobile }}</span
            >
          </p>
        </ion-card-content>
      </ion-card>
      <!---------------خریدار-->
      <ion-card class="mb-4 mt-3 ion-text-right">
        <ion-card-header class="ion-no-padding">
          <ion-card-title class="inv-title-1 text-center">
            مشخصات خریدار
          </ion-card-title>
        </ion-card-header>
        <ion-card-content class="ion-margin-top">
          <p class="invo-addr-1 color-white f-12 mb-2">
            نام شخص حقیقی/حقوقی :
            <span class="f-bold">
              {{ model?.contractHeader?.customerName }}</span
            >
          </p>
          <p class="invo-addr-1 color-white f-12 mb-2">
            نشانی کامل:
            <span class="f-bold">
              {{ model?.contractHeader?.customerAddress }}</span
            >
          </p>
          <p class="invo-addr-1 color-white f-12 mb-2">
            شماره اقتصادی:
            <span class="f-bold">
              {{ model?.contractHeader?.customerEconomicNumber }}</span
            >
          </p>
          <p class="invo-addr-1 color-white f-12 mb-2">
            کد پستی:
            <span class="f-bold">
              {{ model?.contractHeader?.customerPostalCode }}</span
            >
          </p>
          <p class="invo-addr-1 color-white f-12 mb-2">
            شماره ثبت:
            <span class="f-bold">
              {{ model?.contractHeader?.customerRegistrationNumber }}</span
            >
          </p>
          <p class="invo-addr-1 color-white f-12 mb-2">
            شماره ملی:
            <span class="f-bold">
              {{ model?.contractHeader?.customerNationalID }}</span
            >
          </p>
          <p class="invo-addr-1 color-white f-12 mb-2">
            شماره همراه:
            <span class="f-bold">
              {{ model?.contractHeader?.customerMobile }}</span
            >
          </p>
        </ion-card-content>
      </ion-card>
    </div>

    <div class="p-2">
      <ngx-table-mobile
        [data]="model?.details"
        [class]="'bg-table'"
      ></ngx-table-mobile>
    </div>
    <!---------------حمل-->
    <ion-card class="mb-4 mt-3 ion-text-right">
      <ion-card-header class="ion-no-padding">
        <ion-card-title class="inv-title-1 text-center"
          >اطلاعات حمل</ion-card-title
        >
      </ion-card-header>
      <ion-card-content class="ion-margin-top">
        <p class="invo-addr-1 color-white f-12 mb-2">
          نوع محاسبه حمل :
          <span class="f-bold">
            {{
              model?.contractConcreteSupplementary?.pumpCalculationType
            }}</span
          >
        </p>
        <p class="invo-addr-1 color-white f-12 mb-2">
          مبلغ واحد حمل :
          <span class="f-bold">
            {{
              model?.contractConcreteSupplementary?.carryingUnitAmount
                | separator
            }}</span
          >
        </p>
        <p class="invo-addr-1 color-white f-12 mb-2">
          محاسبه کسری تا:
          <span class="f-bold">
            {{
              model?.contractConcreteSupplementary?.calculateTheCarryingAmountTo
            }}</span
          >
        </p>
      </ion-card-content>
    </ion-card>
    <!---------------پمپ-->
    <ion-card class="mb-4 mt-3 ion-text-right">
      <ion-card-header class="ion-no-padding">
        <ion-card-title class="inv-title-1 text-center"
          >اطلاعات پمپ</ion-card-title
        >
      </ion-card-header>
      <ion-card-content class="ion-margin-top">
        <p class="invo-addr-1 color-white f-12 mb-2">
          نوع پمپ :
          <span class="f-bold">
            {{ model?.contractConcreteSupplementary.pumpType }}</span
          >
        </p>
        <p class="invo-addr-1 color-white f-12 mb-2">
          نوع محاسبه پمپ :
          <span class="f-bold">
            {{ model?.contractConcreteSupplementary.pumpCalculationType }}</span
          >
        </p>
        <p class="invo-addr-1 color-white f-12 mb-2">
          مبلغ واحد پمپ :
          <span class="f-bold">
            {{
              model?.contractConcreteSupplementary.pumpUnitAmount | separator
            }}</span
          >
        </p>
      </ion-card-content>
    </ion-card>
    <!-----------------------------رده مقاومتی-->
    <ion-card class="mb-4 mt-3 ion-text-right">
      <ion-card-header class="ion-no-padding">
        <ion-card-title class="inv-title-1 text-center">
          رده مقاومتی
        </ion-card-title>
      </ion-card-header>
      <ion-card-content class="ion-margin-top">
        <p class="invo-addr-1 color-white f-12 mb-2">
          رده مقاومتی :

          <span class="f-bold">
            {{ model?.contractConcreteSupplementary.resistanceCategory }}</span
          >
        </p>
        <p class="invo-addr-1 color-white f-12 mb-2">
          مقدار سیمان :
          <span class="f-bold">
            {{ model?.contractConcreteSupplementary.theAmountOfCement }}</span
          >
        </p>
        <p class="invo-addr-1 color-white f-12 mb-2">
          مقدار آب:
          <span class="f-bold">
            {{ model?.contractConcreteSupplementary.waterToCementRatio }}</span
          >
        </p>
        <p class="invo-addr-1 color-white f-12 mb-2">
          حداقل مقاومت :
          <span class="f-bold">
            {{ model?.contractConcreteSupplementary.minimumResistance }}</span
          >
        </p>
        <p class="invo-addr-1 color-white f-12 mb-2">
          نوع سیمان :
          <span class="f-bold">
            {{ model?.contractConcreteSupplementary.typeOfCement }}</span
          >
        </p>
      </ion-card-content>
    </ion-card>
    <!-----------------------آدرس پروژه   اتمام-->
    <ion-card class="mb-4 mt-3 ion-text-right">
      <ion-card-header class="ion-no-padding">
        <ion-card-title class="inv-title-1 text-center f-12 mb-2">
          آدرس پروژه
        </ion-card-title>
      </ion-card-header>
      <ion-card-content class="ion-margin-top">
        <p class="invo-addr-1 color-white f-12 mb-2">
          <span class="f-bold">
            {{ model?.contractConcreteSupplementary.projectAddress }}</span
          >
        </p>
      </ion-card-content>
    </ion-card>
    <!-----------شرایط و ضوابط-->
    <ion-card class="mb-4 mt-3 ion-text-right">
      <div class="row">
        <div class="col-12">
          <h3 class="inv-title-1">شرایط و ضوابط</h3>
          <div
            [innerHTML]="model?.contractHeader.contractText1 | paragraph"
            class="color-white f-12 mb-2"
          ></div>
          <div
            class="color-white f-12 mb-2"
            [innerHTML]="model?.contractHeader.contractText2 | paragraph"
          ></div>
        </div>
      </div>
      <div class="row mb-2 px-5">
        <ion-checkbox justify="end" [(ngModel)]="isAccepted">
          تمام موارد را خواندم و موافق هستم
        </ion-checkbox>
      </div>
    </ion-card>
    <div class="row mb-3"></div>
    <div class="row mb-3"></div>
    <div class="row mb-3"></div>
  </ion-content>
  <ion-footer class="mt-4">
    <ion-toolbar>
      <ion-tabs>
        <ion-tab-bar slot="bottom">
          <ion-tab-button class="color-footer f-14">
            <a
              href="javascript:window.print()"
              class="btn f-bold btn-block color-footer btn-lg btn-print f-12 text-decoration-none"
            >
              چاپ
            </a>
          </ion-tab-button>
          <ion-tab-button (click)="open(true)" class="color-footer f-14">
            <i class="fa fa-square-check"></i>تایید
          </ion-tab-button>
          <ion-tab-button
            class="color-footer f-bold f-14"
            (click)="open(false)"
          >
            <i class="fa fa-thumbs-down"></i>عدم تایید
          </ion-tab-button>
          <ion-tab-button
            [routerLink]="['/report', 'search']"
            class="color-footer f-bold f-14"
          >
            درباره ما
          </ion-tab-button>
        </ion-tab-bar>
      </ion-tabs>
    </ion-toolbar>
  </ion-footer>

  <ion-modal #modal [initialBreakpoint]="1" [breakpoints]="[0, 1]">
    <ng-template>
      <div class="bg-color">
        <ng-container *ngIf="isAccept; else notisAccept">
          <ion-row class="ion-margin ion-padding row-word">
            <ion-col size="11" class="word-selected">
              <h6 class="color-white">آیا برای تایید قرارداد مطمئن هستید ؟</h6>
            </ion-col>
          </ion-row>
          <div class="row ion-padding">
            <p class="color-white">
              تایید قرار داد
              <strong>{{
                model?.contractHeader.companyName.toUpperCase()
              }}</strong>
            </p>
          </div>
          <div class="d-flex ion-padding justify-content-center">
            <div class="ms-2">
              <ion-button
                expand="full"
                class="color-gray"
                color="primary"
                shape="round"
                (click)="dismiss()"
                >خیر</ion-button
              >
            </div>
            <div>
              <ion-button
                color="warning"
                shape="round"
                expand="full"
                (click)="accept()"
              >
                بله</ion-button
              >
            </div>
          </div>
        </ng-container>
        <ng-template #notisAccept>
          <ion-row class="ion-margin ion-padding row-word">
            <ion-select
              placeholder="علت رد قرار داد"
              [multiple]="true"
              (ionChange)="handleChange($event)"
              okText="انتخاب"
              cancelText="انصراف"
            >
              <ion-select-option
                *ngFor="let item of genderList"
                [value]="item.value"
                >{{ item.label }}</ion-select-option
              >
            </ion-select>
          </ion-row>

          <div class="d-flex ion-padding justify-content-center">
            <div class="ms-2">
              <ion-button
                expand="full"
                class="color-gray"
                color="primary"
                shape="round"
                (click)="dismiss()"
                >انصراف</ion-button
              >
            </div>
            <div>
              <ion-button
                color="warning"
                shape="round"
                expand="full"
                (click)="reject()"
              >
                ذخیره</ion-button
              >
            </div>
          </div>
        </ng-template>
      </div>
    </ng-template>
  </ion-modal>
</ion-app>
